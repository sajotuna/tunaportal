<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.fourth.tuna.domain.user.mapper.ProfessorMapper">

<select id = "findById" 
	parameterType="co.fourth.tuna.domain.user.vo.ProfessorVO" 
	resultType="co.fourth.tuna.domain.user.vo.ProfessorVO">

	select* from professor where no = #{no}

</select>

<update id = "profUpdate" parameterType="co.fourth.tuna.domain.user.vo.ProfessorVO">
	
	update professor set tel = #{tel}, email = #{email}, zip = #{zip}, addr = #{addr}
	where no = #{no}

</update>

<update id = "AdminProfUpdate" parameterType="co.fourth.tuna.domain.user.vo.ProfessorVO">
	
	<selectKey  keyColumn="deptcode,stateCode" resultType="co.fourth.tuna.domain.user.vo.ProfessorVO" keyProperty="deptcode,stateCode" order="BEFORE">
		select no stateCode, (select no deptcode
                      from publiccode
                      where codename = #{deptcode}) deptcode
		from publiccode
		where codename = #{stateCode}
	</selectKey>
	
	
	update professor set name = #{name}, deptcode = #{deptcode}, statecode = #{stateCode}
	where no = #{no}
</update>

</mapper>