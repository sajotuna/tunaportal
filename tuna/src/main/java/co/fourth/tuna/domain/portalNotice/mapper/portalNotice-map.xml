<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="co.fourth.tuna.domain.portalNotice.mapper.PortalNoticeMapper">
	<resultMap type="co.fourth.tuna.domain.portalNotice.vo.PortalNoticeVO" id="portalNotice"></resultMap>

<select id="noticeList" resultMap="portalNotice">
SELECT * FROM PORTALNOTICE
WHERE
<if test="state==1">1 = 1 </if>
<if test="state==2">title like '%'|| #{key} ||'%' </if>
<if test="state==3">content like '%'|| #{key} ||'%'</if>
</select>

<insert id="noticeInsert">
<selectKey resultType="int" keyProperty="id" order="BEFORE">
			SELECT CASE WHEN MAX(NO)!= 0 THEN MAX(NO) + 1 
						ELSE 1 END AS ID FROM PORTALNOTICE;
</selectKey>
INSER INTO PORTALNOTICE
VALUES (#{id}, #{CONTENT}, #{TITLE}, #{VISIBLE}, 100482, sysdate)
</insert>

</mapper>
