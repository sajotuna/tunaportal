<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.fourth.tuna.domain.user.mapper.StudentMapper">

<select id = "findById" 
	parameterType="co.fourth.tuna.domain.user.vo.StudentVO" resultType="co.fourth.tuna.domain.user.vo.StudentVO">
	select* from student where no = #{no}
</select>


<update id = "studUpdate" parameterType="co.fourth.tuna.domain.user.vo.StudentVO">
	update student 
	set tel = #{tel}, email = #{email}, zip = #{zip}, addr = #{addr}
	where no = #{no}

</update>

<select id="findOneById"
	resultType="co.fourth.tuna.domain.user.vo.StudentVO">
	SELECT *
	FROM student
	WHERE no = #{no}
</select>

<update id = "AdminStudUpdate" 
	parameterType="co.fourth.tuna.domain.user.vo.StudentVO">
	update student
	set deptcode = #{deptCode}, name = #{name}, stateCode = #{stateCode}
	WHERE no = #{no}

</update>
 
<select id = "findListBySubjectId"
	resultType="co.fourth.tuna.domain.user.vo.StudentExVO">
	SELECT s.*,
		(<include refid="co.fourth.tuna.domain.common.mapper.CodeMapper.findCodeNameSql">
			<property name="no" value="statecode" />
		</include>) AS statename,
		(<include refid="co.fourth.tuna.domain.common.mapper.CodeMapper.findCodeNameSql">
			<property name="no" value="bacc" />
		</include>) AS bankname,
		(<include refid="co.fourth.tuna.domain.common.mapper.CodeMapper.findCodeNameSql">
			<property name="no" value="deptcode" />
		</include>) AS deptname
	FROM student s
	JOIN lectureapply l
	    ON s.no = l.stno
	WHERE sbjno = #{sbjno}
</select>



</mapper>