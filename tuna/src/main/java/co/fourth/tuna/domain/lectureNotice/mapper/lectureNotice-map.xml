<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="co.fourth.tuna.domain.lectureNotice.mapper.LectureNoticeMapper">
	
	<resultMap id="lectureNoticeMap" 
		type="co.fourth.tuna.domain.lectureNotice.vo.LectureNoticeVO" >
		<association 
			property="subjectVO" 
			column="sbjno"
			javaType="co.fourth.tuna.domain.subject.vo.SubjectVO"
			select="co.fourth.tuna.domain.subject.mapper.SubjectMapper.findOne" 
		/>
		
	</resultMap>
	

	<select id="findByProfessor"
		resultMap="lectureNoticeMap" >
			SELECT *
			FROM (
				SELECT
				ROWNUM rn,
					l.*
				FROM lecturenotice l
				JOIN subject s
					ON l.sbjno = s.no
				WHERE s.pfno = #{prof.no}
				ORDER BY l.enrolldate DESC
			) WHERE rn
					BETWEEN (#{pageNum}-1) * #{size} +1
					AND #{pageNum}*#{size}
		</select>
</mapper>