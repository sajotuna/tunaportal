<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" 
xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
data-layout-decorate="~{layouts/lecApplyLayout}">

<head>
  <meta charset="utf-8">
  <title>수강꾸러미</title>
  <style>
    h5 {
      margin-top: 50px;
      margin-left: 20px;
    }

    tr {
      text-align: center;
    }

    td {
      text-align: center;
    }

    .fomrtag {
      margin-left: 50px;
    }
  </style>

</head>

<body>
<main layout:fragment="main">
  <div id="section">

    <div id="page-container">
      <div class="content content-boxed ">
        <h3 class="h3 fw-bold mb-2">수강꾸러미</h3>
        <div class="bg-body-extra-light" style="padding: 10px;">
          <div class="m-4">
            <form action="" method="post" class="row">
              <div class="col-md-3 col-xl-2 fomrtag">
                <div class="mb-5">
                  <select class="form-select" id="example-select" name="example-select">
                    <option selected>학부(과)</option>
                    <option value="1">참치과</option>
                    <option value="1">사조과</option>
                    <option value="1">컴퓨터공학과</option>
                    <option value="1">정보통신학과</option>
                  </select>
                </div>
              </div>
              <div class="col-md-3 col-xl-2 fomrtag">
                <div class="mb-2">
                  <select class="form-select" id="example-select" name="example-select">
                    <option selected>이수구분</option>
                    <option value="">전공필수</option>
                    <option value="">전공선택</option>
                    <option value="">교양필수</option>
                    <option value="">교양선택</option>
                  </select>
                </div>
              </div>
              <div class="col-md-3 col-xl-2 fomrtag">
                <div class="mb-2">
                  <select class="form-select" id="example-select" name="example-select">
                    <option selected>학년</option>
                    <option value="1">1학년</option>
                    <option value="2">2학년</option>
                    <option value="3">3학년</option>
                    <option value="4">4학년</option>
                  </select>
                </div>
              </div>
              <div class="col-md-3 col-xl-2 fomrtag">
                <div class="mb-2">
                  <input type="number" placeholder="직접입력...." class="form-control"
                    id="example-flatpickr-time-standalone-24" name="example-flatpickr-time-standalone-24">
                </div>
              </div>
              <div class="col-md-2 col-xl-1 fomrtag">
                <div class="mb-2 ">
                  <button type="submit" class="btn btn-secondary col-sm-12">조회</button>
                </div>
              </div>

            </form>
            <div class="mb-5 ">
              <div class="block block-rounded block-themed">
                <div class="block-header bg-primary-darker">
                  <h1 class="block-title">[개설과목]</h1>
                  </div>
              <form th:action="@{/stud/basketInsert}" method="post">
              <table class="table table-striped table-vcenter">
                <thead>
                  <tr>
                    <th class="d-none d-sm-table-cell" style="width: 20px;">선택</th>
                    <th class="d-none d-sm-table-cell" style="width: 100px;">이수구분</th>
                      <th class="d-none d-sm-table-cell" style="width: 100px;">과목코드</th>
                      <th class="d-none d-sm-table-cell" style="width: 100px;">과목명</th>
                      <th class="d-none d-sm-table-cell" style="width: 100px;">교수명</th>
                      <th class="d-none d-sm-table-cell" style="width: 110px;">강의실</th>
                      <th class="d-none d-sm-table-cell" style="width: 50px;">학점</th>
                      <th class="d-none d-sm-table-cell" style="width: 50px;">정원</th>
                      <th class="d-none d-sm-table-cell" rowspan = "2" style="width: 120px;">강의시간</th>
                  </tr>
                </thead>
                  <tbody>
                    <tr th:scope="row" th:each="sub, status : ${list}">
                      <th:block th:if = "${ status.index == 0 || (status.index != 0 && list[status.index-1].NO != sub.NO)}">
                      <th class="fw-semibold fs-sm"><input type="checkbox" name = "courcheck" th:value = "${sub.NO}+','+${sub.SEASONCODE} +','+ ${sub.DAYCODE} +','+ ${sub.TIMECODE}"></th>
                      <th class="fw-semibold fs-sm" th:text="${@codeList.getName(sub.TYPE)}"></th>
                      <td class="fw-semibold fs-sm" th:text = "${sub.NO}"></td>
                      <td class="fw-semibold fs-sm" th:text = "${sub.NAME}"></td>
                      <td class="fw-semibold fs-sm"><a href="javascript:showPopup();" th:text = "${sub.PRONAME}"></a></td>
                      <td class="fw-semibold fs-sm" th:text = "${@codeList.getName(sub.ROOMCODE)}"></td>
                      <td class="fw-semibold fs-sm" th:text = "${sub.POINT}"></td>
                      <td class="fw-semibold fs-sm" th:text = "${sub.LIMIT}"></td>
                     </th:block>
                    
                    <td class="fw-semibold fs-sm" >
                    	[[${sub.DAYCODE +'  '+ sub.TIMECODE}]]
                     </td>
                    </tr>
                  </tbody>

              </table>
              <div class="d-flex justify-content-end">
                <div class="m-4">
                  <input type="submit" value="신청" class="btn btn-info">
                </div>
              </div>
			</form>
              <ul class="pagination justify-content-center">
                <li class="page-item">
                  <a class="page-link" href="javascript:void(0)" tabindex="-1" aria-label="Previous" id = "prev">
                    <span aria-hidden="true">
                      <i class="fa fa-angle-double-left"></i>
                    </span>
                    <span class="visually-hidden">Previous</span>
                  </a>
                </li>
                <li class="page-item">
                  <a class="page-link" id = "pageingBtn" href="javascript:void(0)">1</a>
                </li>
                <li class="page-item">
                  <a class="page-link" id = "pageingBtn" href="javascript:void(0)">2</a>
                </li>
                <li class="page-item">
                  <a class="page-link" id = "pageingBtn" href="javascript:void(0)">3</a>
                </li>
                <li class="page-item">
                  <a class="page-link" id = "pageingBtn" href="javascript:void(0)">4</a>
                </li>
                <li class="page-item">
                  <a class="page-link" href="javascript:void(0)" aria-label="Next" id = "next">
                    <span aria-hidden="true">
                      <i class="fa fa-angle-double-right"></i>
                    </span>
                    <span class="visually-hidden">Next</span>
                  </a>
                </li>
              </ul>
            </div>
           <div class="mb-5 ">
              <div class="block block-rounded block-themed">
                <div class="block-header bg-primary-darker">
                  <h1 class="block-title">[수강꾸러미]</h1>
                </div>
              <table class="table table-striped table-vcenter">
                  <thead>
                    <tr>
                    
                      <th class="d-none d-sm-table-cell" style="width: 100px;">이수구분</th>
                      <th class="d-none d-sm-table-cell" style="width: 100px;">과목코드</th>
                      <th class="d-none d-sm-table-cell" style="width: 100px;">과목명</th>
                      <th class="d-none d-sm-table-cell" style="width: 100px;">교수명</th>
                      <th class="d-none d-sm-table-cell" style="width: 110px;">강의실</th>
                      <th class="d-none d-sm-table-cell" style="width: 50px;">학점</th>
                      <th class="d-none d-sm-table-cell" style="width: 50px;">정원</th>
                      <th class="d-none d-sm-table-cell" rowspan = "2" style="width: 120px;">강의시간</th>
                    <th class="d-none d-sm-table-cell" style="width: 100px;">삭제</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:scope="row" th:each="sub, status : ${baskList}">
                    <th:block th:if = "${ status.index == 0 || (status.index != 0 && baskList[status.index-1].NO != sub.NO)}">
                     
                      <th class="fw-semibold fs-sm" th:text="${@codeList.getName(sub.TYPE)}"></th>
                      <td class="fw-semibold fs-sm" th:text = "${sub.NO}"></td>
                      <td class="fw-semibold fs-sm" th:text = "${sub.NAME}"></td>
                      <td class="fw-semibold fs-sm"><a href="javascript:showPopup();" th:text = "${sub.PRONAME}"></a></td>
                      <td class="fw-semibold fs-sm" th:text = "${@codeList.getName(sub.ROOMCODE)}"></td>
                      <td class="fw-semibold fs-sm" th:text = "${sub.POINT}"></td>
                      <td class="fw-semibold fs-sm" th:text = "${sub.LIMIT}"></td>
                      <td class="fw-semibold fs-sm" >
	                      [[${sub.DAYCODE +'  '+ sub.TIMECODE}]]
                      </td>
                      <th class="fw-semibold fs-sm"><a class = "btn" th:href = "@{/stud/basketDelete(sbjNo=${sub.NO})}"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
  <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/>
</svg></a></th>
                     </th:block>
                    </tr>
                  </tbody>
                </table>
            </div>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
  </div>
  <script>
  document.addEventListener('DOMContentLoaded', function(){
		
		
		let nextBtn = document.querySelector("#next")
		let prevBtn = document.querySelector("#prev")
		let pageingBtn = document.querySelectorAll("#pageingBtn");
		nextBtn.addEventListener('click', function(){
			pageingBtn.forEach(btn =>{
				let a = btn.innerHTML
				btn.innerHTML = parseInt(a)+4;
			})
		})
		
		prevBtn.addEventListener('click', function(){
			pageingBtn.forEach(btn =>{
				let a = btn.innerHTML
				if (parseInt(a) > 4){
					btn.innerHTML = parseInt(a)-4;
				}
				
			})
		})
		
		pageingBtn.forEach(btn =>{
			btn.addEventListener('click',function(){
				let a = btn.innerHTML
				console.log(parseInt(a))
				location.href = '/tuna/stud/courseBasket?pageNum='+parseInt(a)
			})
		})
		
		
	})
  function showPopup() {
      window.open("/tuna/stud/lectureEvaluationSearch", "강의평가조회", "width=650, height=600, top=10, left=10");
    }
  </script>
  </main>
</body>

</html>